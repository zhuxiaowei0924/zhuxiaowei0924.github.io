---
title: linux就该这么学：用户身份与文件权限
date: 2021-01-25 21:17:51
tags:
- 第5章节：用户身份与文件权限
categories:
- linux就该这么学
---
# 1.用户身份与能力

管理员UID为0：系统的管理员用户。

系统用户UID为1～999： Linux系统为了避免因某个服务程序出现漏洞而被黑客提权至整台服务器，默认服务程序会有独立的系统用户负责运行，进而有效控制被破坏范围。

普通用户UID从1000开始：是由管理员创建的用于日常工作的用户。

<!--more-->
一个用户只有一个基本用户组，但是可以有多个扩展用户组，从而满足日常的工作需要。

（1）useradd：用于创建新的用户；默认的用户家目录会被存放在/home目录中，默认的Shell解释器为/bin/bash，而且默认会创建一个与该用户同名的基本用户组。


| 参数 | 作用 |
| --- | --- |
| -d |	指定用户的家目录 |
| -u |	指定该用户的默认UID |
| -g |	指定一个初始的用户基本组（必须已存在） |
| -G |	指定一个或多个扩展用户组 |
| -s |	指定该用户的默认Shell解释器 |

/sbin/nologin，它是终端解释器中的一员，与Bash解释器有着天壤之别。一旦用户的解释器被设置为nologin，则代表该用户不能登录到系统中：

（2）groupadd:用于创建用户组；

（3）usermod：用于修改用户属性；用户的信息保存在/etc/passwd文件中，可以直接用文本编辑器来修改其中的用户参数项目，也可以用usermod命令修改已经创建的用户信息，诸如用户的UID、基本/扩展用户组、默认终端等。  


| 参数 | 作用 |
| --- | --- |
| -d -m |	参数-m与参数-d连用，可重新指定用户的家目录并自动把旧的数据转移过去 |
| -g |	变更所属用户组 |
| -G |	变更扩展用户组 |
| -L |	锁定用户禁止其登录系统 |
| -U |	解锁用户，允许其登陆系统 |
| -s |	变更默认终端 |

（4）passwd：用于修改用户密码、过期时间、认证信息等；


| 参数 | 作用 |
| --- | --- |
| -l |	锁定用户禁止其登录系统 |
| -u |	解锁用户，允许其登陆系统 |
| --stdin |	允许通过标准输入修改用户密码，如echo "NewPassWord" | passwd --stdin Username |
| -d |	使该用户可用空密码登录系统 |
| -e |	强制用户在下次登录时修改密码 |
| -S |	显示用户的密码是否被锁定，以及密码所采用的加密算法名称 |

（5）userdel：用于删除用户；


| 参数 | 作用 |
| --- | --- |
| -f |	强制删除用户 |
| -r |	同时删除用户及用户家目录 |

# 2.文件权限与归属

 -：普通文件；d：目录文件；l：链接文件；b：块设备文件；c：字符设备文件；p：管道文件

对于一般文件来说，权限比较容易理解：“可读”表示能够读取文件的实际内容；“可写”表示能够编辑、新增、修改、删除文件的实际内容；“可执行”则表示能够运行一个脚本程序。

对目录文件来说，“可读”表示能够读取目录内的文件列表；“可写”表示能够在目录内新增、删除、重命名文件；而“可执行”则表示能够进入该目录。

## 2.1 文件的特殊权限

详细内容可参考：https://www.cnblogs.com/sparkdev/p/9651622.html；

（1）SUID：让执行者临时获得命令的所有者的权限；

（2）SGID：目录内新文件所有组，继承原有目录所有组的名称！













